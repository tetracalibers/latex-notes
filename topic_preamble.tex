% === color ===

\usepackage[dvipsnames]{xcolor}

% ref: https://latexcolor.com/
\definecolor{hotpink}{rgb}{1.0, 0.41, 0.71}
\definecolor{carnationpink}{rgb}{1.0, 0.65, 0.79}
\definecolor{deeppink}{rgb}{1.0, 0.08, 0.58}
\definecolor{capri}{rgb}{0.0, 0.75, 1.0}
\definecolor{rosepink}{rgb}{1.0, 0.4, 0.8}
\definecolor{princetonorange}{rgb}{1.0, 0.56, 0.0}
\definecolor{lavendermagenta}{rgb}{0.93, 0.51, 0.93}
\definecolor{malachite}{rgb}{0.04, 0.85, 0.32}
\definecolor{lawngreen}{rgb}{0.49, 0.99, 0.0}
\definecolor{periwinkle}{rgb}{0.8, 0.8, 1.0}
\definecolor{lightslategray}{rgb}{0.47, 0.53, 0.6}
\definecolor{robineggblue}{rgb}{0.0, 0.8, 0.8}
\definecolor{rosebonbon}{rgb}{0.98, 0.26, 0.62}
\definecolor{airforceblue}{rgb}{0.36, 0.54, 0.66}
\definecolor{columbiablue}{rgb}{0.61, 0.87, 1.0}
\definecolor{magnolia}{rgb}{0.97, 0.96, 1.0}
\definecolor{coolgrey}{rgb}{0.55, 0.57, 0.67}

% === box ===

\usepackage{awesomebox}

% === math ===

\usepackage{physics}
\usepackage{braket}

\usepackage{amssymb} % use \blacksquare

\usepackage{amsthm} % 定理環境とQEDコマンド
\renewcommand{\qedsymbol}{\textcolor{coolgrey}{$\blacksquare$}}

\usepackage{mathtools}
% 別の場所で参照する数式以外は番号が付かないように
\mathtoolsset{showonlyrefs=true}

\usepackage{systeme} % 連立方程式を簡単に書く
\usepackage{empheq}

\newcommand{\id}{\operatorname{id}}
\newcommand{\Id}{\operatorname{Id}}
\newcommand{\diag}{\operatorname{diag}}
\newcommand{\Ker}{\operatorname{Ker}}

% === font ===

\usepackage{amsfonts} % use \mathbb

\usepackage[T1]{fontenc}
\usepackage{lxfonts}

% monospace font
\usepackage[scaled]{beramono}

% === layout ===

\usepackage[top=20truemm,bottom=20truemm,left=20truemm,right=60truemm,marginparwidth=40truemm,marginparsep=10truemm]{geometry} % 余白
\renewcommand{\baselinestretch}{1.25} % 行間

\usepackage{leading}

\setlength{\parindent}{0pt} % 段落始めでの字下げをしない

\usepackage{enumitem}
\newcommand{\romanlabel}{\textsf{\roman*.}}
\newcommand{\romannum}[1]{\textsf{#1}}

\usepackage[noparboxrestore]{marginnote}

\usepackage{tocloft}
% chapterのnumwidthを広くする
\setlength{\cftchapnumwidth}{4em}

\usepackage{titling}
\renewcommand{\maketitlehooka}{\textsf}

% === tikz ===

\usepackage[dvipdfmx]{graphicx}

\usepackage{tikz}
\usetikzlibrary{fit,patterns}

\usepackage{witharrows}
\usepackage{nicematrix}

% === tcolorbox ===

\usepackage{tcolorbox}
\tcbuselibrary{listings,breakable,xparse,skins,hooks,theorems}

\newcommand{\titlegap}{\quad\\[0.1cm]}

\DeclareTColorBox{definition}{m O{} }%
{
  enhanced,
  colframe=magnolia,
  colback=magnolia!20!white,
  coltitle=black,
  fonttitle=\bfseries,
  breakable,
  sharp corners,
  title={\textcolor{Cerulean!60!black}{\faGraduationCap}\hspace{0.1em} #1},
  detach title,
  before upper={\tcbtitle\quad},
  bottom=0.5cm,
  top=0.5cm,
  right=0.5cm,
  left=0.5cm,
  #2
}

\DeclareTColorBox{theorem}{m O{} }%
{
  enhanced,
  colframe=magnolia,
  colback=magnolia!20!white,
  coltitle=black,
  fonttitle=\bfseries,
  breakable,
  sharp corners,
  title={\textcolor{magenta!70!black}{\faAnchor}\hspace{0.1em} #1},
  detach title,
  before upper={\tcbtitle\quad},
  bottom=0.5cm,
  top=0.5cm,
  right=0.5cm,
  left=0.5cm,
  #2
}

% 背景がグレー
\DeclareTColorBox{shaded}{O{} }%
{
  enhanced,
  colframe=white,
  colback=gray!10,
  breakable=true,
  sharp corners,
  detach title,
  bottom=0.25cm,
  top=0.25cm,
  right=0.25cm,
  left=0.25cm,
  #1
}

\newcommand{\ProofColor}{coolgrey}
\DeclareTColorBox{proof}{O{証明}}{%
  empty,
  title={\faBroom #1},
  attach boxed title to top left,
  sharp corners,
  boxed title style={
      empty,
      size=minimal,
      toprule=2pt,
      top=4pt,
      left=1em,
      right=1em,
      top=0.25cm,
      overlay={
          \draw[\ProofColor, double,line width=1pt] ([yshift=-1pt]frame.north west)--([yshift=-1pt]frame.north east);
        }
    },
  coltitle=\ProofColor,
  fonttitle=\bfseries,
  before=\par\medskip\noindent,
  parbox=false,
  boxsep=0pt,
  left=1em,
  right=1em,
  top=0.5cm,
  bottom=0.5cm,
  breakable,
  pad at break*=0mm,
  vfill before first,
  overlay unbroken={
      \draw[\ProofColor,line width=0.5pt]
      ([yshift=-1pt]title.north east)
      --([xshift=-0.5pt,yshift=-1pt]title.north-|frame.east)
      --([xshift=-0.5pt]frame.south east)
      --(frame.south west);
    },
  overlay first={
      \draw[\ProofColor,line width=1pt]([yshift=-1pt]title.north east)--([xshift=-0.5pt,yshift=-1pt]title.north-|frame.east)--([xshift=-0.5pt]frame.south east);
    },
  overlay middle={
      \draw[\ProofColor,line width=1pt] ([xshift=-0.5pt]frame.north east)--([xshift=-0.5pt]frame.south east);
    },
  overlay last={
      \draw[\ProofColor,line width=1pt] ([xshift=-0.5pt]frame.north east)--([xshift=-0.5pt]frame.south east)--(frame.south west);
    },%
}

% === memo ===

\usepackage{zebra-goodies} % TODOなどの注釈

% === original ===

\newcommand{\keyword}[1]{\textcolor{RubineRed}{\textbf{#1}}}

\newcommand{\br}{\vskip0.5\baselineskip}

\usepackage[object=vectorian]{pgfornament}
\newcommand{\sectionline}{%
  \noindent
  \begin{center}
    {\color{lightgray}
      \resizebox{0.5\linewidth}{1ex}
      {{%
            {\begin{tikzpicture}
                  \node  (C) at (0,0) {};
                  \node (D) at (9,0) {};
                  \path (C) to [ornament=85] (D);
                \end{tikzpicture}}}}}%
  \end{center}%
}

\renewcommand{\labelitemii}{$\circ$}

\newcommand{\refbook}[1]{\small ref: #1}

% === toc ===

\usepackage{tocloft}
\renewcommand{\cftsecfont}{\rmfamily}
\renewcommand{\cftsecpagefont}{\rmfamily}
\setcounter{secnumdepth}{0}

\addtocontents{toc}{\protect\thispagestyle{empty}}
\pagestyle{empty}

% === hyperlink ===

\definecolor{oxfordblue}{rgb}{0.0, 0.13, 0.28}

% 「%」は以降の内容を「改行コードも含めて」無視するコマンド
\usepackage[%
  dvipdfmx,% 欧文ではコメントアウトする
  pdfencoding=auto, psdextra,% 数学記号を含める
  setpagesize=false,%
  bookmarks=true,%
  bookmarksdepth=tocdepth,%
  bookmarksnumbered=true,%
  colorlinks=true,%
  allcolors=oxfordblue,%
  pdftitle={},%
  pdfsubject={},%
  pdfauthor={},%
  pdfkeywords={}%
]{hyperref}
% PDFのしおり機能の日本語文字化けを防ぐ((u)pLaTeXのときのみかく)
\usepackage{pxjahyper}
% ref: https://tex.stackexchange.com/questions/251491/math-symbol-in-section-heading
\pdfstringdefDisableCommands{\def\varepsilon{\textepsilon}}
