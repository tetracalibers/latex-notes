\documentclass[../../imaging-math]{subfiles}

\begin{document}

\ifSubfilesClassLoaded{
  \let\subsubsection\subsection
  \let\subsection\section
  \chapter{三角関数}
}{
  \section{三角関数}
}

\subsection{円周率}

すべての円は、お互いを拡大もしくは縮小した関係にある。

\begin{center}
  \begin{tikzpicture}
    \def\d1{2cm}
    \def\k{2}
    \def\dst{5}

    % 円周
    \node      [draw,circle, inner sep=0pt, minimum size=\d1, draw=magenta!80, very thick, below, pattern=crosshatch dots, pattern color=pink] (C1) {};
    \node also [label={[above, text=magenta!80]:$l_1$}] (C1);
    % 直径
    \draw [auxline, cyan, very thick] (C1.west) -- (C1.east) node [midway, above, pos=0.75] {$d_1$};
    % 中心
    \fill (C1) circle [radius=0.05] node [below] {$C_1$};

    % 拡大した円
    \node      [draw,circle, inner sep=0pt, minimum size=\d1*\k, draw=magenta!80, very thick, below, pattern=crosshatch dots, pattern color=pink] (C2) at ($(C1)+(\dst, \d1)$) {};
    \node also [label={[above, text=magenta!80]:$l_2$}] (C2);
    % 直径
    \draw [auxline, cyan, very thick] (C2.west) -- (C2.east) node [midway, above, pos=0.75] {$d_2$};
    % 中心
    \fill (C2) circle [radius=0.05] node [below] {$C_2$};

    % k倍を表す矢印
    \draw [->] ($(C1.east)+(1em, 0)$) -- node [midway, above] {$k$倍} ($(C2.west)-(1em,0)$);
  \end{tikzpicture}
\end{center}

円$C_2$が、円$C_1$を$k$倍に拡大したものだとすると、その直径や円周も$C_1$の$k$倍となる。

\begin{align}
  d_{2} & = k\cdot d_{1} \\
  l_{2} & = k\cdot l_{1}
\end{align}

この2つの式を各辺どうし割ることで、$k$が約分されて消え、直径と円周の比が等しくなることがわかる。

\begin{equation}
  \dfrac{d_{2}}{l_{2}} = \dfrac{d_{1}}{l_{1}}
\end{equation}

\begin{theorem}{円の直径と円周の比}
  すべての円において、直径と円周の長さの比は一定である。
\end{theorem}

そして、この一定の比率は、円周率$\pi$として知られている。

\begin{definition}{円周率}
  円の円周の長さ$l$と直径の長さ$d$の比を、円周率といい、$\pi$で表す。
  \LARGE
  \begin{equation}
    \pi = \dfrac{l}{d} = 3.14\ldots
  \end{equation}
\end{definition}

$\pi$の定義式を変形すると、円周の長さを求める式が得られる。

半径を$r$とすると、直径$d = 2r$であるから、

\begin{equation}
  l = \pi \cdot d = 2\pi r
\end{equation}

\begin{theorem}{円周の長さ}
  円の円周の長さ$l$は、半径$r$を使って次のように表される。
  \LARGE
  \begin{equation}
    l = 2\pi r
  \end{equation}
\end{theorem}

\subsection{直角三角形の相似}

ある図形のすべての辺を$r$倍したとき、元の図形と$r$倍後の図形は\keyword{相似}であるという。

\begin{center}
  \begin{tikzpicture}[
      myangles/.style = {draw, angle radius = #1 mm, lightslategray},
      myangles/.default = 4,
      txtnode/.style = {font=\large},
    ]
    \begin{scope}[local bounding box=trg1]
      \coordinate (a) at (0,0);
      \coordinate (b) at (3,0);
      \coordinate (c) at (1,2);

      \draw (a) -- (b) -- (c) -- cycle;

      % 各辺に異なる色をつける
      \draw [very thick, Rhodamine] (a) -- (b) node[txtnode, midway, below] {$a$};
      \draw [very thick, Cerulean] (b) -- (c) node[txtnode, midway, above right=-0.2em] {$b$};
      \draw [very thick, Dandelion] (c) -- (a) node[txtnode, midway, left] {$c$};

      \pic [myangles]     {angle = b--a--c};

      \pic [myangles]     {angle = a--c--b};
      \pic [myangles=5]   {angle = a--c--b};

      \pic [myangles]     {angle = c--b--a};
      \pic [myangles=5]   {angle = c--b--a};
      \pic [myangles=6]   {angle = c--b--a};
    \end{scope}

    \begin{scope}[xshift=44mm, scale=1.5, local bounding box=trg2]
      \coordinate (a) at (0,0);
      \coordinate (b) at (3,0);
      \coordinate (c) at (1,2);

      \draw (a) -- (b) -- (c) -- cycle;

      \draw [very thick, Rhodamine] (a) -- (b) node[txtnode, midway, below] {$ra$};
      \draw [very thick, Cerulean] (b) -- (c) node[txtnode, midway, above right=-0.2em] {$rb$};
      \draw [very thick, Dandelion] (c) -- (a) node[txtnode, midway, left] {$rc$};

      \pic [myangles]     {angle = b--a--c};

      \pic [myangles]     {angle = a--c--b};
      \pic [myangles=5]   {angle = a--c--b};

      \pic [myangles]     {angle = c--b--a};
      \pic [myangles=5]   {angle = c--b--a};
      \pic [myangles=6]   {angle = c--b--a};
    \end{scope}

    % 相似を表す記号
    \node[gray] at ($(trg1.east)!0.5!(trg2.west)$) {\Huge$\sim$};
  \end{tikzpicture}
\end{center}

元の図形の辺の比を$a:b:c$とすると、$r$倍後の図形の辺の比は$ra:rb:rc = a:b:c$となる。

このように、相似な図形には「辺の比が等しい」という性質がある。

\subsubsection{2つの角が一致する三角形同士は相似}

三角形の内角の和は$180^\circ$であるから、2つの角の大きさが等しければ、もう1つの角の大きさも等しくなる。

つまり、2つの角の大きさが一致する2つの三角形は、辺の間の角度は変わらず、各辺の長さを一定倍したものなので、相似といえる。

\vskip\baselineskip

「辺の間の角度がすべて同じ」ことと「各辺の長さが一定倍されている」ことがうまく結びつかない人は、次の図を見てみよう。

もしも辺の長さの拡大率が辺によって異なるとしたら、辺の間の角度を変えない限り、頂点として辺同士を結ぶことができない。

\begin{center}
  \begin{tikzpicture}[
      myangles/.style = {draw, angle radius = #1 mm, lightslategray},
      myangles/.default = 4,
      txtnode/.style = {font=\large},
    ]
    \begin{scope}[local bounding box=trg1]
      \coordinate (a) at (0,0);
      \coordinate (b) at (3,0);
      \coordinate (c) at (1,2);

      \draw (a) -- (b) -- (c) -- cycle;

      % 各辺に異なる色をつける
      \draw [very thick, Rhodamine] (a) -- (b) node[txtnode, midway, below] {$ra$};
      \draw [very thick, Cerulean] (b) -- ($(b)!15em!(c)$) node[txtnode, midway, above right=-0.2em] {$Rb$};
      \draw [very thick, Dandelion] (c) -- (a) node[txtnode, midway, left] {$rc$};

      \pic [myangles]     {angle = b--a--c};

      \pic [myangles]     {angle = a--c--b};
      \pic [myangles=5]   {angle = a--c--b};

      \pic [myangles]     {angle = c--b--a};
      \pic [myangles=5]   {angle = c--b--a};
      \pic [myangles=6]   {angle = c--b--a};
    \end{scope}

    \begin{scope}[xshift=80mm, local bounding box=trg2]
      \coordinate (a) at (0,0);
      \coordinate (b) at (3,0);
      \coordinate (c) at (1,2);

      \coordinate (c') at ($(b)!15em!(c)$);

      \draw (a) -- (b) -- (c') -- cycle;

      % 各辺に異なる色をつける
      \draw [very thick, Rhodamine] (a) -- (b) node[txtnode, midway, below] {$ra$};
      \draw [very thick, Cerulean] (b) -- (c') node[txtnode, midway, above right=-0.2em] {$Rb$};
      \draw [very thick, Dandelion] (c') -- (a) node[txtnode, midway, left] {$rc$};

      \pic [myangles]     {angle = b--a--c'};

      \pic [myangles]     {angle = a--c'--b};
      \pic [myangles=5]   {angle = a--c'--b};

      \pic [myangles]     {angle = c'--b--a};
      \pic [myangles=5]   {angle = c'--b--a};
      \pic [myangles=6]   {angle = c'--b--a};
    \end{scope}

    \draw[->, thick, -Straight Barb] (trg1.east) -- node[above] {\small 無理やり三角形に…} (trg2.west);
  \end{tikzpicture}
\end{center}

\subsubsection{1つの鋭角が一致する直角三角形同士は相似}

ある1つの角が直角である三角形を、\keyword{直角三角形}という。

2つの角が一致する三角形同士が相似であるなら、直角三角形の場合は、1つの鋭角が一致するだけで相似であることがわかる。

\begin{center}
  \begin{tikzpicture}
    \def\s{1.75}

    \coordinate (a1) at (0,0);
    \coordinate (b1) at (2,0);
    \coordinate (c1) at (2,1.5);

    \coordinate (a2) at (a1);
    \coordinate (c2) at ($(a1)!2!(c1)$);
    \coordinate (b2') at ($(a1)!2!(b1)$);
    \coordinate (b2) at ($(a1)!(c2)!(b2')$);

    \coordinate (a3) at (a1);
    \coordinate (c3) at ($(a1)!3!(c1)$);
    \coordinate (b3') at ($(a1)!3!(b1)$);
    \coordinate (b3) at ($(a1)!(c3)!(b3')$);

    \draw[Goldenrod, fill=Goldenrod!60, fill opacity=0.8] (a3) -- (b3) -- (c3) -- cycle;
    \draw[SkyBlue, fill=SkyBlue!60, fill opacity=0.8] (a2) -- (b2) -- (c2) -- cycle;
    \draw[carnationpink, fill=carnationpink!60, fill opacity=0.8] (a1) -- (b1) -- (c1) -- cycle;

    \pic [draw, Magenta, fill=Magenta, fill opacity=0.6, angle radius=7mm, angle eccentricity=1.5] {angle = b3--a3--c3};

    % 直角
    \pic [draw, lightslategray, angle radius=2.5mm] {right angle = a3--b3--c3};
    \pic [draw, lightslategray, angle radius=2.5mm] {right angle = a2--b2--c2};
    \pic [draw, lightslategray, angle radius=2.5mm] {right angle = a1--b1--c1};

    \draw[Dandelion]
    (b3) to[bend right=30] node[right,midway]{$nb$} (c3)
    (c3) to[bend right=30] node[near start,above=0.25em]{$nc$} (a3)
    (a3) to[bend right=30] node[near end,below=0.25em]{$na$} (b3);

    \draw[Cerulean]
    (b2) to[bend right=20] node[right,midway]{$mb$} (c2)
    (c2) to[bend right=20] node[near start,above=0.25em]{$mc$} (a2)
    (a2) to[bend right=20] node[near end,below=0.25em]{$ma$} (b2);

    \draw[Rhodamine]
    (b1) to[bend right=10] node[right,midway]{$b$} (c1)
    (c1) to[bend right=10] node[near start,above]{$c$} (a1)
    (a1) to[bend right=10] node[near end,below=-0.15em]{$a$} (b1);
  \end{tikzpicture}
\end{center}

つまり、鋭角が等しいすべての直角三角形は、お互いを拡大もしくは縮小した関係（互いに相似の関係）にあり、3辺の比も等しくなる。

\vskip\baselineskip

言い換えれば、
\begin{emphabox}
  \begin{spacebox}
    \begin{center}
      直角三角形の3辺の比は、1つの鋭角の大きさで決まる
    \end{center}
  \end{spacebox}
\end{emphabox}
ということになる。

\subsection{直角三角形による測量}

直角三角形では、3辺の比の値が1つの角によって決まる。

角度が同じであれば比の値は一致するので、小さな直角三角形で角度に応じた辺の比の値を計算しておけば、同じ角度を持つ大きな直角三角形でも同じ比の値を使って計算できる。

\vskip\baselineskip

これにより、たとえば建物の高さを直接測らなくても、視点からの距離と見上げる角度を使って、建物の高さを計算で求めることができる。

\begin{figure}[h]
  \centering
  \begin{minipage}{0.49\columnwidth}
    \centering
    \begin{tikzpicture}
      \coordinate (a) at (0,0);
      \coordinate (b) at (4,0);
      \coordinate (c) at (4,3);

      \draw (a) -- (b) -- (c) -- cycle;

      \node[gray] at (a) [left] {\bfseries 視点};

      \draw[->, very thick, -Straight Barb, Rhodamine] ([xshift=0.7em]b) -- ([xshift=0.7em]c) node[midway, right] {\bfseries 建物の高さ};
      \draw[->, very thick, -Straight Barb, Cerulean] ([yshift=-0.7em]a) -- ([yshift=-0.7em]b) node[midway, below] {\bfseries 視点からの距離};
      \draw[->, very thick, dashed, -Straight Barb, Dandelion] ([yshift=0.7em]a) -- ([yshift=0.7em]c) node[sloped, above, midway] {\bfseries 見上げる};

      \pic [draw, ->, very thick, BurntOrange, angle radius=7mm, angle eccentricity=1.5, "\large$\theta$"] {angle = b--a--c};
      \pic [draw, lightslategray, angle radius=3mm] {right angle = a--b--c};
    \end{tikzpicture}
  \end{minipage}
  \begin{minipage}{0.49\columnwidth}
    \begin{align*}
      \text{\bfseries 比の値}\bigl(\theta\bigr)       & = \dfrac{\text{\bfseries\textcolor{Rhodamine}{建物の高さ}}}{\text{\bfseries\textcolor{Cerulean}{視点からの距離}}} \\\\
      \text{\bfseries\textcolor{Rhodamine}{建物の高さ}} & = \text{\bfseries\textcolor{Cerulean}{視点からの距離}} \times \text{\bfseries 比の値}\bigl(\theta\bigr)
    \end{align*}
  \end{minipage}
\end{figure}

辺の比の値は角度によって決まるため、関数の記号を真似て$\text{\bfseries 比の値}\bigl(\theta\bigr)$と書いている。

$\text{\bfseries 比の値}\bigl(\theta\bigr)$を（たとえば同じ角度$\theta$を持つ小さな三角形で）事前に求めておけば、このような測量に利用することができる。

\vskip\baselineskip

実際に、直角三角形の辺の比の値を角度の関数とみて、その対応関係や値を調べてみることで、他にもさまざまな応用先が見つかるのではないだろうか。

その発想の第一歩が、\keyword{三角比}という概念である。

\subsection{三角比}

直角三角形の3辺の比の値を角度の関数として見つめ直すにあたって、3辺すべての比を一度に考えようとすると、比の値（分数）が複雑になって扱いづらい。

\begin{figure}[h]
  \centering
  \begin{minipage}{0.33\columnwidth}
    \centering
    \begin{tikzpicture}
      \coordinate (a) at (0,0);
      \coordinate (b) at (4,0);
      \coordinate (c) at (4,3);

      \draw (a) -- (b) -- (c) -- cycle;

      \draw[thick, Dandelion] (c) to[bend right=20] node[midway, fill=white]{\Large$c$} (a);
      \draw[thick, Rhodamine] (a) to[bend right=20] node[midway, fill=white]{\Large$a$} (b);
      \draw[thick, Cerulean] (b) to[bend right=20] node[midway,fill=white]{\Large$b$} (c);

      \pic [draw, very thick, LimeGreen, fill=LimeGreen, angle radius=7mm, angle eccentricity=1.5, "\Large$\theta$"] {angle = b--a--c};
      \pic [draw, lightslategray, angle radius=3mm] {right angle = a--b--c};
    \end{tikzpicture}
  \end{minipage}
  \begin{minipage}{0.33\columnwidth}
    \huge
    \begin{equation*}
      \textcolor{Rhodamine}{a} : \textcolor{Cerulean}{b} : \textcolor{Dandelion}{c}
    \end{equation*}
  \end{minipage}
\end{figure}

そこで、2辺ごとに長さの比を考えることにする。

2辺ずつの比の組み合わせは6通りあり、それぞれの比の値に名前がつけられている。

\vskip\baselineskip

\begingroup
\renewcommand{\a}{\textcolor{Rhodamine}{a}}
\renewcommand{\b}{\textcolor{Cerulean}{b}}
\renewcommand{\c}{\textcolor{BurntOrange}{c}}
\newcommand{\fnname}[1]{\textcolor{airforceblue}{\LARGE #1}\hspace{0.2em}}
\begin{forest}
  for tree={
  inner sep = 1em,
  anchor = east,
  grow = east,
  rounded corners,
  forked edge,            % for forked edge
  s sep = 4mm,    % sibling distance
  l sep = 8mm,    % level distance
  fork sep = 4mm,    % distance from parent to branching point
  L1/.style={font=\Large,draw},
  L2/.style={font=\bfseries\color{gray},draw,edge={semithick}},
  L3/.style={font=\Large,edge={semithick}},
  L4/.style={font=\large\color{gray}, edge={dotted, semithick}},
  }
  [$\a:\b:\c$,L1
  [$\c$と$\a$の比,L2
  [{$\c:\a=\dfrac{\c}{\a}$},L3
  [\fnname{sec}ant,L4]
  ]
  [{$\a:\c=\dfrac{\a}{\c}$},L3
  [\fnname{cos}ine,L4]
  ]
  ]
  [$\b$と$\c$の比,L2
  [{$\c:\b=\dfrac{\c}{\b}$},L3
  [\fnname{cosec}ant,L4]
  ]
  [{$\b:\c=\dfrac{\b}{\c}$},L3
  [\fnname{sin}e,L4]
  ]
  ]
  [$\a$と$\b$の比,L2
  [{$\a:\b=\dfrac{\a}{\b}$},L3
  [\fnname{cot}angent,L4]
  ]
  [{$\b:\a=\dfrac{\b}{\a}$},L3
  [\fnname{tan}gent,L4]
  ]
  ]
  ]
\end{forest}
\endgroup

これらをまとめて\keyword{三角比}という。

特に重要なのは$\sin,\,\cos,\,\tan$の3つであり、他の3つはこれらの逆数として表されるので、あまり使われることはない。

三角比は、1つの鋭角$\theta$の大きさによって決まるので、比の名前に基準となる角度$\theta$をつけて表記する。

\begin{figure}[h]
  \centering
  \begin{minipage}{0.49\columnwidth}
    \centering
    \begin{tikzpicture}
      \coordinate (a) at (0,0);
      \coordinate (b) at (4,0);
      \coordinate (c) at (4,3);

      % [debug] draw points
      % \foreach \p in {a, b, c}
      % \fill[black] (\p) circle (2pt) node[below]{$\p$};

      \draw (a) -- (b) -- (c) -- cycle;

      \pic [draw, very thick, LimeGreen, fill=LimeGreen, angle radius=7mm, angle eccentricity=1.5, "\Large$\theta$"] {angle = b--a--c};
      \pic [draw, lightslategray, angle radius=3mm] {right angle = a--b--c};

      \draw[thick, lightslategray] (a) -- (c) node[midway, below]{\Large$c$};
      \draw[thick, lightslategray] (a) -- (b) node[midway, above right]{\Large$a$};
      \draw[thick, lightslategray] (b) -- (c) node[midway, left]{\Large$b$};

      \coordinate (cMid) at ($(a)!0.5!(b)$);
      \coordinate (aMid) at ($(b)!0.5!(c)$);
      \coordinate (bMid) at ($(c)!0.5!(a)$);

      \node [above=1.25em of bMid] (bMid') {};
      \node [right=1em of aMid] (aMid') {};
      \node [below=1em of cMid] (cMid') {};

      \node [below=1em of a] (a'cMid) {};
      \node [above=1.25em of a] (a'bMid) {};

      \node [below=1em of b] (b'aMid) {};
      \node [right=1em of b] (b'cMid) {};

      \node [right=1em of c] (cMid'a) {};
      \node [left=1.75em of c] (cMid'b) {};

      % 直線a'bMid--bMid'と、直線a'cMid--cMid'の交点
      \coordinate (a') at (intersection of a'bMid--bMid' and a'cMid--cMid');
      \draw[Rhodamine, very thick, ->, line join=round] (bMid') -- (a') -- (cMid') node[sloped, below, near start] {\LARGE$\cos$};

      % 直線cMid'--b'aMidと、直線b'cMid--aMid'の交点
      \coordinate (b') at (intersection of cMid'--b'aMid and b'cMid--aMid');
      \draw[BurntOrange, very thick, ->, line join=round] (cMid') -- (b') -- (aMid') node[sloped, above, near start] {\LARGE$\tan$};

      % 直線aMid'--cMid'bと、直線cMid'a--bMid'の交点
      \coordinate (c') at (intersection of aMid'--cMid'a and cMid'b--bMid');
      \draw[Cerulean, very thick, <-, line join=round] (aMid') -- (c') -- (bMid') node[sloped, above, near start] {\LARGE$\sin$};
    \end{tikzpicture}
  \end{minipage}
  \begin{minipage}{0.22\columnwidth}
    \centering
    \Large
    \begin{align*}
      \color{Rhodamine}
      \cos \theta & = \dfrac{a}{c} \\\\
      \color{Cerulean}
      \sin \theta & = \dfrac{b}{c}
    \end{align*}
  \end{minipage}
  \begin{minipage}{0.22\columnwidth}
    \centering
    \Large
    \begin{align*}
      \color{BurntOrange}
      \tan \theta & = \dfrac{b}{a}
    \end{align*}
  \end{minipage}
\end{figure}

\subsection{扇形の弧長と角}

\subsubsection{扇形の弧の長さ}

\subsubsection{扇形の弧長と半径による中心角の表現}

\end{document}
