\documentclass[../../imaging-math]{subfiles}

\begin{document}

\section{ベクトルの測り方}

2つのベクトルがどれくらい似ているかを議論するために、\keyword{内積}という尺度を導入する。

\subsection{内積：ベクトルの「近さ」を返す関数}

\keyword{内積}は、2つのベクトルを引数にとり、その「近さ」を表すスカラー値を返す関数として定義する。

\br

具体的な定義式を知る前に、「近さ」を測る道具として、どのような性質を持っていてほしいかを整理しておこう。

具体的な定義式は、その性質を満たすように「作る」ことにする。

\begin{definition}{内積の公理}
  \titlegap
  $\mathbb{R}$上の線形空間$V$を考え、$\vb*{u}, \vb{v}, \vb{w} \in V,\, c \in \mathbb{R} $とする。\\
  2つのベクトルを引数にとり、実数を返す関数$(\cdot, \cdot): V \times V \to \mathbb{R}$として、次の性質を満たすものを\hl{内積}という。
  \begin{description}
    \item[対称性] $(\vb{u}, \vb{v}) = (\vb{v}, \vb{u})$
    \item[双線形性1.スカラー倍] $(c\vb*{u}, \vb{v}) = (\vb*{u}, c\vb{v}) = c(\vb{u}, \vb{v})$
    \item[双線形性2.和] $(\vb*{u} + \vb{w}, \vb{v}) = (\vb*{u}, \vb{v}) + (\vb{w}, \vb{v}), \quad (\vb*{u}, \vb{v} + \vb{w}) = (\vb*{u}, \vb{v}) + (\vb*{u}, \vb{w})$
    \item[正定値性] $(\vb{u}, \vb{u}) \geq 0, \quad (\vb{u}, \vb{u}) = 0 \iff \vb{u} = \vb{0}$
  \end{description}
\end{definition}

\subsubsection{対称性}

$\vb*{u}$が$\vb{v}$にどれくらい近いか？という視点で測っても、$\vb{v}$が$\vb*{u}$にどれくらい近いか？という視点で測っても、得られる「近さ」は同じであってほしい、という性質。

\subsubsection{双線形性}

どちらかのベクトルをスカラー倍してから「近さ」を測りたいとき、元のベクトルとの近さを測っておいて、それを定数倍することでも目的の「近さ」を求められる、という性質。

また、ほかのベクトルを足してから「近さ」を測りたいとき、足し合わせたいベクトルそれぞれについて近さを測っておいて、それを合計することでも目的の「近さ」を求められる、という性質。

\br

これらは、近さを測るという「操作」と「演算」が入れ替え可能であるという、\keyword{線形性}と呼ばれる性質である。

2つの引数$\vb*{u}, \vb{v}$のどちらに関しても線形性があるということで、「双」がついている。

\subsubsection{正定値性}

ベクトルの「近さ」とは、向きがどれくらい近いか、という尺度でもある。

同じ方向なら正の数、逆の方向なら負の数をとるのが自然だと考えられる。

\br

自分自身との「近さ」を測るとき、自分と自分は完全に同じ向きであるから、その「近さ」は正の数であるはずだ。

自分自身との「近さ」が$0$になるようなベクトルは、零ベクトル$\vb{0}$だけである。

\subsection{内積で表したい「関係の強さ」}

内積の公理には含めないが、内積とはどんな量にしたいか？を事前に設計しておくと、後々のイメージにも役立つ。

\br

さて、内積とは、2つのベクトルがどれくらい同じ方向を向いているか？という尺度にしたい。

そこで、2つのベクトルの向きに関する視点で、内積のイメージを膨らませてみる。

\subsubsection{平行の度合いを内積に反映させる}

2つのベクトルが完全に平行なら、それらのベクトルは互いにスカラー倍で表すことができるので、互いに依存し合っている。

2つのベクトルが平行に近ければ近いほど、これらは互いに似ていて「関係性の強い」ベクトルだといえる。

\subsubsection{同方向・逆方向を内積の符号で表す}

2つのベクトルが完全に平行で、さらに同じ方向を向いているなら、それらのベクトルは互いに正の数のスカラー倍で表すことができる。

一方、2つのベクトルが完全に平行で、逆の方向を向いているなら、片方のベクトルはもう片方のベクトルを負の数を使ってスカラー倍したものになる。

逆向きのベクトルどうしは、近い方向どころかむしろ「かけ離れた方向を向いている」といえる。

\br

内積が「向きの似ている度合い」なら、「近い方向を向いている」度合いを正の数で、「かけ離れた方向を向いている」度合いを負の数で表すのが自然だろう。

\subsubsection{直交するベクトルの内積はゼロとする}

「同じ向きに近い」場合と「逆向きに近い」場合が切り替わるのは、2つのベクトルどうしが垂直なときである。

ならば、内積の正と負が切り替わる境界、すなわち内積が$0$になる場合とは、2つのベクトルが直交する場合にするのが自然といえるのではないだろうか。

\br

実際、完全に垂直な2つのベクトルは、互いに全く影響を与えない方向を向いている。

2つのベクトルが直交している場合、2つのベクトルは互いに全く関係がないものとして、関係の強さを表す内積の値は$0$にしたい。

\subsection{標準基底の内積とクロネッカーのデルタ}

内積の公理から一般的な内積の定義式を考える前に、まずは単純なベクトルの内積がどのように振る舞うべきかを考えてみよう。

ここで取り上げる単純なベクトルとは、\keyword{標準基底}である。

\subsubsection{標準基底の定義と直交性}

標準基底は、座標軸の1目盛というイメージで捉えられる。数式としては、次のように定義される。

\begin{definition}{標準基底}
  \titlegap
  $n$次元線形空間$\mathbb{R}^n$において、$i$番目の成分が$1$で、ほかの成分が$0$である$n$個のベクトルを、\hl{標準基底}と呼ぶ。
  \large
  \begin{align*}
    \vb{e}_1 & = \begin{bmatrix}
                   1      \\
                   0      \\
                   \vdots \\
                   0
                 \end{bmatrix}, \quad
    \vb{e}_2 = \begin{bmatrix}
                 0      \\
                 1      \\
                 \vdots \\
                 0
               \end{bmatrix}, \quad
    \cdots, \quad
    \vb{e}_n = \begin{bmatrix}
                 0      \\
                 0      \\
                 \vdots \\
                 1
               \end{bmatrix}
  \end{align*}
\end{definition}

実際に座標軸の1目盛というイメージで描いてみるとわかるように、標準基底どうしは互いに\keyword{直交}している。

\todo{2次元平面の場合の標準基底の図と数式を横並びで描く}

\subsubsection{標準基底の内積}

標準基底のうち、異なる2つのベクトルどうし（たとえば$\vb*{e}_1$と$\vb*{e}_2$）は直交していることから、その内積は$0$として定義しよう。

\br

一方で、標準基底の1つである同じベクトルどうし（たとえば$\vb*{e}_1$と$\vb*{e}_1$）の内積は、$1$と定義してしまうことにする。

1つの標準基底ベクトルは進む長さの1単位（座標軸上の1目盛）なのだから、同じ1つの標準基底ベクトルどうしの内積も、近さの1単位としておくと都合がいい。

\subsubsection{クロネッカーのデルタを使った表現}

ここまで議論した標準基底の内積の定義は、次のように整理できる。
\begin{equation*}
  (\vb{e}_i, \vb{e}_j) =
  \left\{
  \begin{array}{ll}
    1 & (i = j)    \\
    0 & (i \neq j)
  \end{array}
  \right.
\end{equation*}

ここで、\keyword{クロネッカーのデルタ}という記号を、次のように定義しよう。

\begin{definition}{クロネッカーのデルタ}
  \Large
  \begin{equation*}
    \delta_{ij} =
    \left\{
    \begin{array}{ll}
      1 & (i = j)    \\
      0 & (i \neq j)
    \end{array}
    \right.
  \end{equation*}
\end{definition}

クロネッカーのデルタ記号を使うと、標準基底の内積の定義は、次のように簡潔に表現できる。

\begin{definition}{標準基底の内積}
  \titlegap
  $n$次元線形空間$\mathbb{R}^n$において、標準基底$\vb{e}_i,\, \vb{e}_j$の\hl{内積}を、次のように定義する。
  \Large
  \begin{equation*}
    (\vb{e}_i, \vb{e}_j) = \delta_{ij}
  \end{equation*}
\end{definition}

\subsection{数ベクトルの内積の定義式}

内積の公理と、標準基底の内積をもとに、一般的なベクトルの内積の定義式を導き出すことができる。

\br

まず、任意のベクトル$\vb*{a},\, \vb{b} \in \mathbb{R}^n$を、標準基底の一次結合として表そう。
\begin{align*}
  \vb*{a} & = a_1 \vb*{e}_1 + a_2 \vb*{e}_2 + \cdots + a_n \vb*{e}_n = \sum_{i=1}^n a_i \vb*{e}_i \\
  \vb*{b} & = b_1 \vb*{e}_1 + b_2 \vb*{e}_2 + \cdots + b_n \vb*{e}_n = \sum_{j=1}^n b_j \vb*{e}_j
\end{align*}

これらの内積を、双線形性を使って展開していく。

まず、和に関する双線形性より、「足してから内積を計算」と「内積を計算してから足す」は同じ結果になるので、シグマ記号$\sum$を内積の外に出すことができる。

また、スカラー倍に関する双線形性より、定数$a_i, \, b_j$も内積の外に出すことができる。
\begin{align*}
  (\vb*{a}, \vb*{b}) & = \Biggl( \sum_{i=1}^n a_i \vb*{e}_i, \sum_{j=1}^n b_j \vb*{e}_j \Biggr) \\
                     & = \sum_{i=1}^n \sum_{j=1}^n a_i b_j (\vb*{e}_i, \vb{e}_j)
\end{align*}

標準基底の内積$(\vb{e}_i, \vb{e}_j)$はクロネッカーのデルタ$\delta_{ij}$で表せるので、次のように書き換えられる。
\begin{align*}
  (\vb*{a}, \vb*{b}) & = \sum_{i=1}^n \sum_{j=1}^n a_i b_j (\vb*{e}_i, \vb{e}_j) \\
                     & = \sum_{i=1}^n \sum_{j=1}^n a_i b_j \delta_{ij}
\end{align*}

ここで、$\delta_{ij}$は$i \neq j$のとき$0$になるので、$i = j$の項しか残らない。
\begin{align*}
  (\vb*{a}, \vb*{b}) & = \sum_{i=1}^n \sum_{j=1}^n a_i b_j \delta_{ij} \\
                     & = \sum_{i=1}^n a_i b_i \delta_{ii}
\end{align*}

$\delta_{ii}$は常に$1$なので、最終的に次のような式が得られる。
\begin{align*}
  (\vb*{a}, \vb*{b}) & = \sum_{i=1}^n a_i b_i
\end{align*}

\begin{definition}{数ベクトルの内積}
  \titlegap
  $n$次元線形空間$\mathbb{R}^n$において、数ベクトル$\vb*{a},\, \vb{b}$の\hl{内積}を次のように定義する。
  \Large
  \begin{equation*}
    (\vb*{a}, \vb*{b}) = \sum_{i=1}^n a_i b_i
  \end{equation*}
\end{definition}

数ベクトルの同じ位置にある数どうしをかけ算して、それらを足し合わせる、という形になっている。

\subsection{内積のさまざまな表記}

内積の記法はいくつかあり、それぞれ異なる見方を表現したものになっている。

\begin{itemize}
  \item $(\vb*{a}_1, \vb*{a}_2)$：2つのベクトルを引数にとる関数
  \item $\vb*{a}_1^\top \vb*{a}_2$：行列の積の定義を使った記法
  \item $\Braket{\vb*{a}_1 | \vb*{a}_2}$：ブラケット記法
\end{itemize}

$\vb*{a}_1^\top \vb*{a}_2$という表記については、のちに行列の積を定義する際にまた述べるとする。

$\Braket{\vb*{a}_1 | \vb*{a}_2}$というブラケット記法は、抽象的な対象をベクトルとして考える上で便利である。次章で、この表記の解釈を見ていこう。

\subsection{ブラケット記法}

\begin{mindflow}
  \begin{enumerate}
    \item ブラとケット
    \item 状態と観測装置
  \end{enumerate}
\end{mindflow}

\subsection{ノルム：自分自身の大きさ}

\subsection{ノルムを使った距離の表現}

\subsection{描けない角度の定義}

\subsection{射影：ベクトルの「影」}

\end{document}
